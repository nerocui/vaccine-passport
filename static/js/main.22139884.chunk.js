(this["webpackJsonphealth-pass"]=this["webpackJsonphealth-pass"]||[]).push([[0],{113:function(e,t){},222:function(e,t,n){},223:function(e,t,n){},358:function(e,t){},401:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),i=n(208),a=n.n(i),r=(n(222),n(10)),l=n(418),s=n(13),d=n(211),u=n.n(d),j=n(87),b=(n(223),n(213)),h=n(421),v=n(420),O=n(422),f=n(214),p=n.n(f),m=n(3),x=function(e){var t,n,o,i,a,l,s,d,u,j,b,f,x,S=e.code,g=e.onClick,y=Object(c.useState)(),C=Object(r.a)(y,2),z=C[0],D=C[1],k=Object(c.useState)(),I=Object(r.a)(k,2),N=I[0],R=I[1],T=Object(c.useState)(),F=Object(r.a)(T,2),P=F[0],B=F[1];return Object(c.useEffect)((function(){S&&p()(S).then((function(e){var t=e.payload.vc.credentialSubject.fhirBundle.entry;if(t){var n=t.filter((function(e){return"Patient"===e.resource.resourceType}));n&&n.length>0&&D(n[0]);var c=t.filter((function(e){return"Immunization"===e.resource.resourceType})).sort((function(e,t){return new Date(e.resource.occurrenceDateTime)-new Date(t.resource.occurrenceDateTime)}));c&&c.length>0&&(R(c[0]),c.length>1&&B(c[1]))}})).catch((function(e){return console.log("Failed to decode QR Code")}))}),[S,D,R,B]),S?Object(m.jsxs)("div",{onClick:g,className:"flipper-container",style:{border:"1px solid grey",borderRadius:"1rem"},children:[Object(m.jsxs)(h.a,{children:[Object(m.jsx)(v.a,{sx:{fontSize:14},color:"text.grey",children:"Name"}),Object(m.jsx)(v.a,{variant:"h6",component:"p",children:"".concat(null===z||void 0===z||null===(t=z.resource)||void 0===t||null===(n=t.name[0])||void 0===n?void 0:n.given.map((function(e){return"".concat(e," ")}))," ").concat(null===z||void 0===z||null===(o=z.resource)||void 0===o||null===(i=o.name[0])||void 0===i?void 0:i.family)}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Birthday"}),Object(m.jsx)(v.a,{variant:"h6",component:"p",children:null===z||void 0===z||null===(a=z.resource)||void 0===a?void 0:a.birthDate}),Object(m.jsx)(O.a,{style:{borderColor:"grey"}}),Object(m.jsx)(v.a,{sx:{fontSize:18},children:"First Shot"}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Date"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===N||void 0===N||null===(l=N.resource)||void 0===l?void 0:l.occurrenceDateTime}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Lot Number"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===N||void 0===N||null===(s=N.resource)||void 0===s?void 0:s.lotNumber}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Taken By"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===N||void 0===N||null===(d=N.resource)||void 0===d?void 0:d.performer.map((function(e){return"".concat(e.actor.display,",")}))}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Status"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===N||void 0===N||null===(u=N.resource)||void 0===u?void 0:u.status}),Object(m.jsx)(O.a,{style:{borderColor:"grey"}}),Object(m.jsx)(v.a,{sx:{fontSize:18},children:"Second Shot"}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Date"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(j=P.resource)||void 0===j?void 0:j.occurrenceDateTime}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Lot Number"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(b=P.resource)||void 0===b?void 0:b.lotNumber}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Taken By"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(f=P.resource)||void 0===f?void 0:f.performer.map((function(e){return"".concat(e.actor.display,",")}))}),Object(m.jsx)(v.a,{sx:{fontSize:14},children:"Status"}),Object(m.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(x=P.resource)||void 0===x?void 0:x.status})]}),Object(m.jsx)("div",{className:"bar"})]}):null};j.a.WORKER_PATH=b.a;var S=Object(s.a)("input")({display:"none"}),g=function(){var e=localStorage.getItem("imagePath"),t=Object(c.useState)(!1),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(c.useState)(e),s=Object(r.a)(a,2),d=s[0],b=s[1],h=Object(c.useState)(),v=Object(r.a)(h,2),O=v[0],f=v[1],p=Object(c.useState)(),g=Object(r.a)(p,2),y=g[0],C=g[1],z=Object(c.useMemo)((function(){var e=new FileReader;return e.onload=function(){j.a.scanImage(e.result).then((function(t){t.startsWith("shc:")?(b(e.result),C(t),localStorage.setItem("imagePath",e.result)):f("Invalid QR Code")})).catch((function(e){return f("Invalid QR Code")}))},e}),[b,f]),D=Object(c.useCallback)((function(e){z.readAsDataURL(e.target.files[0]),f(void 0)}),[z,f]),k=Object(c.useCallback)((function(){d&&(confirm("Remove your Vaccine Card?")&&(b(void 0),C(void 0),f(void 0),i(!1),localStorage.removeItem("imagePath")))}),[d,b,C,f,i]),I=Object(c.useCallback)((function(){i(!o)}),[o,i]);return Object(c.useEffect)((function(){d&&!y&&j.a.scanImage(d).then((function(e){e.startsWith("shc:")?C(e):f("Invalid QR Code")})).catch((function(e){return f("Invalid QR Code")}))}),[d,y,C,f]),Object(m.jsxs)("div",{id:"app",children:[Object(m.jsx)("h1",{id:"app-title",children:"Vaccine Passport"}),!d&&Object(m.jsxs)("label",{className:"center",htmlFor:"contained-button-file",children:[Object(m.jsx)(S,{onChange:D,accept:"image/*",id:"contained-button-file",type:"file"}),Object(m.jsx)(l.a,{variant:"contained",component:"span",children:"Upload"})]}),!!O&&Object(m.jsx)("p",{className:"bottom",style:{color:"red"},children:O}),!!d&&!O&&Object(m.jsx)("div",{id:"flipper",className:"center",children:Object(m.jsxs)(u.a,{isFlipped:o,flipDirection:"horizontal",children:[Object(m.jsx)("div",{onClick:I,className:"flipper-container",children:Object(m.jsx)("img",{src:d,alt:"covid vaccine qr code"})}),Object(m.jsx)(x,{code:y,onClick:I})]})}),!!d&&!O&&Object(m.jsx)(l.a,{id:"delete",variant:"contained",color:"error",onClick:k,children:"Delete"})]})},y=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,423)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(o.a.StrictMode,{children:Object(m.jsx)(g,{})}),document.getElementById("root")),y()}},[[401,1,2]]]);
//# sourceMappingURL=main.22139884.chunk.js.map