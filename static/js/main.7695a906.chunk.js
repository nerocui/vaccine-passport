(this["webpackJsonphealth-pass"]=this["webpackJsonphealth-pass"]||[]).push([[0],{113:function(e,t){},223:function(e,t,n){},224:function(e,t,n){},359:function(e,t){},402:function(e,t,n){"use strict";n.r(t);var c=n(0),i=n.n(c),o=n(208),a=n.n(o),r=(n(223),n(10)),l=n(417),s=n(13),d=n(211),u=n.n(d),j=n(87),b=(n(224),n(213)),h=n(420),v=n(419),O=n(421),f=n(214),p=n.n(f),x=n(3),m=Object(s.a)("div")({border:"1px solid grey",borderRadius:"1rem"}),S=function(e){var t,n,i,o,a,l,s,d,u,j,b,f,S,g=e.code,y=Object(c.useState)(),C=Object(r.a)(y,2),z=C[0],k=C[1],D=Object(c.useState)(),R=Object(r.a)(D,2),I=R[0],N=R[1],T=Object(c.useState)(),F=Object(r.a)(T,2),P=F[0],B=F[1];return Object(c.useEffect)((function(){g&&p()(g).then((function(e){var t=e.payload.vc.credentialSubject.fhirBundle.entry;if(t){var n=t.filter((function(e){return"Patient"===e.resource.resourceType}));n&&n.length>0&&k(n[0]);var c=t.filter((function(e){return"Immunization"===e.resource.resourceType})).sort((function(e,t){return new Date(e.resource.occurrenceDateTime)-new Date(t.resource.occurrenceDateTime)}));c&&c.length>0&&(N(c[0]),c.length>1&&B(c[1]))}})).catch((function(e){return console.log("Failed to decode QR Code")}))}),[g,k,N,B]),g?Object(x.jsxs)(m,{children:[Object(x.jsxs)(h.a,{children:[Object(x.jsx)(v.a,{sx:{fontSize:14},color:"text.grey",children:"Name"}),Object(x.jsx)(v.a,{variant:"h6",component:"p",children:"".concat(null===z||void 0===z||null===(t=z.resource)||void 0===t||null===(n=t.name[0])||void 0===n?void 0:n.given.map((function(e){return"".concat(e," ")}))," ").concat(null===z||void 0===z||null===(i=z.resource)||void 0===i||null===(o=i.name[0])||void 0===o?void 0:o.family)}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Birthday"}),Object(x.jsx)(v.a,{variant:"h6",component:"p",children:null===z||void 0===z||null===(a=z.resource)||void 0===a?void 0:a.birthDate}),Object(x.jsx)(O.a,{style:{borderColor:"grey"}}),Object(x.jsx)(v.a,{sx:{fontSize:18},children:"First Shot"}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Date"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===I||void 0===I||null===(l=I.resource)||void 0===l?void 0:l.occurrenceDateTime}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Lot Number"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===I||void 0===I||null===(s=I.resource)||void 0===s?void 0:s.lotNumber}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Taken By"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===I||void 0===I||null===(d=I.resource)||void 0===d?void 0:d.performer.map((function(e){return"".concat(e.actor.display,",")}))}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Status"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===I||void 0===I||null===(u=I.resource)||void 0===u?void 0:u.status}),Object(x.jsx)(O.a,{style:{borderColor:"grey"}}),Object(x.jsx)(v.a,{sx:{fontSize:18},children:"Second Shot"}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Date"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(j=P.resource)||void 0===j?void 0:j.occurrenceDateTime}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Lot Number"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(b=P.resource)||void 0===b?void 0:b.lotNumber}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Taken By"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(f=P.resource)||void 0===f?void 0:f.performer.map((function(e){return"".concat(e.actor.display,",")}))}),Object(x.jsx)(v.a,{sx:{fontSize:14},children:"Status"}),Object(x.jsx)(v.a,{variant:"h7",component:"p",children:null===P||void 0===P||null===(S=P.resource)||void 0===S?void 0:S.status})]}),Object(x.jsx)("div",{className:"bar"})]}):Object(x.jsx)(m,{children:"Failed to scan the QR code"})};j.a.WORKER_PATH=b.a;var g=Object(s.a)("input")({display:"none"}),y=function(){var e=localStorage.getItem("imagePath"),t=Object(c.useState)(!1),n=Object(r.a)(t,2),i=n[0],o=n[1],a=Object(c.useState)(e),s=Object(r.a)(a,2),d=s[0],b=s[1],h=Object(c.useState)(),v=Object(r.a)(h,2),O=v[0],f=v[1],p=Object(c.useState)(),m=Object(r.a)(p,2),y=m[0],C=m[1],z=Object(c.useMemo)((function(){var e=new FileReader;return e.onload=function(){j.a.scanImage(e.result).then((function(t){t.startsWith("shc:")?(b(e.result),C(t),localStorage.setItem("imagePath",e.result)):f("Invalid QR Code")})).catch((function(e){return f("Invalid QR Code")}))},e}),[b,f]),k=Object(c.useCallback)((function(e){z.readAsDataURL(e.target.files[0]),f(void 0)}),[z,f]),D=Object(c.useCallback)((function(){d&&(confirm("Remove your Vaccine Card?")&&(b(void 0),C(void 0),f(void 0),o(!1),localStorage.removeItem("imagePath")))}),[d,b,C,f,o]),R=Object(c.useCallback)((function(){o(!i)}),[i,o]),I=Object(c.useCallback)((function(){d&&!y&&j.a.scanImage(d).then((function(e){e.startsWith("shc:")?C(e):C(void 0)})).catch((function(e){return f("Invalid QR Code")}))}),[d,y,C,f]);return Object(c.useEffect)((function(){I()}),[I]),Object(x.jsxs)("div",{id:"app",children:[Object(x.jsx)("h1",{id:"app-title",children:"Vaccine Passport"}),!d&&Object(x.jsxs)("label",{className:"center",htmlFor:"contained-button-file",children:[Object(x.jsx)(g,{onChange:k,accept:"image/*",id:"contained-button-file",type:"file"}),Object(x.jsx)(l.a,{variant:"contained",component:"span",children:"Open"})]}),!!O&&Object(x.jsxs)("div",{children:[Object(x.jsx)("p",{className:"bottom",style:{color:"red"},children:O}),Object(x.jsx)(l.a,{onClick:I,variant:"contained",children:"Retry"})]}),!!d&&!O&&Object(x.jsx)("div",{id:"flipper",className:"center",children:Object(x.jsxs)(u.a,{isFlipped:i,flipDirection:"horizontal",children:[Object(x.jsx)("div",{onClick:R,className:"flipper-container",children:Object(x.jsx)("img",{src:d,alt:"covid vaccine qr code"})}),Object(x.jsx)("div",{onClick:R,className:"flipper-container",children:Object(x.jsx)(S,{code:y,onClick:R})})]})}),!!d&&!O&&Object(x.jsx)(l.a,{id:"delete",variant:"contained",color:"error",onClick:D,children:"Delete"})]})},C=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,422)).then((function(t){var n=t.getCLS,c=t.getFID,i=t.getFCP,o=t.getLCP,a=t.getTTFB;n(e),c(e),i(e),o(e),a(e)}))};a.a.render(Object(x.jsx)(i.a.StrictMode,{children:Object(x.jsx)(y,{})}),document.getElementById("root")),C()}},[[402,1,2]]]);
//# sourceMappingURL=main.7695a906.chunk.js.map