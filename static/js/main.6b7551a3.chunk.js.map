{"version":3,"sources":["components/info-card.jsx","App.js","reportWebVitals.js","index.js"],"names":["InfoCard","code","onClick","useState","patient","setPatient","firstShot","setFirstShot","secondShot","setSecondShot","useEffect","decode","then","res","entries","payload","vc","credentialSubject","fhirBundle","entry","patients","filter","e","resource","resourceType","length","shots","sort","a","b","Date","occurrenceDateTime","catch","err","console","log","className","style","border","borderRadius","CardContent","Typography","sx","fontSize","color","variant","component","name","given","map","family","birthDate","Divider","borderColor","lotNumber","performer","p","actor","display","status","QrScanner","WORKER_PATH","QrScannerWorkerPath","Input","styled","App","existingFile","localStorage","getItem","isFlipped","setIsFlipped","img","setImg","errorString","setErrorString","setCode","reader","useMemo","FileReader","onload","scanImage","result","resCode","startsWith","setItem","onFileChange","useCallback","event","readAsDataURL","target","files","undefined","onDelete","confirm","removeItem","onFlip","id","htmlFor","onChange","accept","type","Button","flipDirection","src","alt","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6b7551a3.chunk.js","sourcesContent":["import { Typography, CardContent, Divider } from \"@mui/material\"\r\nimport { useEffect, useState } from \"react\";\r\nimport decode from \"shc-protocol\";\r\n\r\nexport const InfoCard = ({ code, onClick }) => {\r\n    const [patient, setPatient] = useState();\r\n    const [firstShot, setFirstShot] = useState();\r\n    const [secondShot, setSecondShot] = useState();\r\n    \r\n    useEffect(() => {\r\n        if(!!code) {\r\n          decode(code)\r\n            .then(res => {\r\n                const entries = res.payload.vc.credentialSubject.fhirBundle.entry;\r\n                if (!!entries) {\r\n                    const patients = entries.filter(e => e.resource.resourceType === 'Patient');\r\n                    if (patients && patients.length > 0) {\r\n                        setPatient(patients[0]);\r\n                    }\r\n                    const shots = entries\r\n                        .filter(e => e.resource.resourceType === 'Immunization')\r\n                        .sort((a, b) => new Date(a.resource.occurrenceDateTime) - new Date(b.resource.occurrenceDateTime));\r\n                    if (shots && shots.length > 0) {\r\n                        setFirstShot(shots[0]);\r\n                        if (shots.length > 1) {\r\n                            setSecondShot(shots[1]);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            .catch(err => console.log('Failed to decode QR Code'));\r\n        }\r\n      }, [code, setPatient, setFirstShot, setSecondShot])\r\n\r\n    if (!code) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div onClick={onClick} className='flipper-container' style={{ border: '1px solid grey', borderRadius: '1rem' }}>\r\n            <CardContent>\r\n                <Typography sx={{ fontSize: 14 }} color='text.grey'>\r\n                    Name\r\n                </Typography>\r\n                <Typography variant=\"h6\" component=\"p\">\r\n                    {`${patient?.resource?.name[0]?.given.map(name => `${name} `)} ${patient?.resource?.name[0]?.family}`}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Birthday\r\n                </Typography>\r\n                <Typography variant=\"h6\" component=\"p\">\r\n                    {patient?.resource?.birthDate}\r\n                </Typography>\r\n\r\n                <Divider style={{ borderColor: 'grey' }}/>\r\n\r\n                <Typography sx={{ fontSize: 18 }}>\r\n                    First Shot\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Date\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {firstShot?.resource?.occurrenceDateTime}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Lot Number\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {firstShot?.resource?.lotNumber}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Taken By\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {firstShot?.resource?.performer.map(p => `${p.actor.display},`)}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Status\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {firstShot?.resource?.status}\r\n                </Typography>\r\n\r\n                <Divider style={{ borderColor: 'grey' }}/>\r\n\r\n                <Typography sx={{ fontSize: 18 }}>\r\n                    Second Shot\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Date\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {secondShot?.resource?.occurrenceDateTime}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Lot Number\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {secondShot?.resource?.lotNumber}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Taken By\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {secondShot?.resource?.performer.map(p => `${p.actor.display},`)}\r\n                </Typography>\r\n                <Typography sx={{ fontSize: 14 }}>\r\n                    Status\r\n                </Typography>\r\n                <Typography variant=\"h7\" component=\"p\">\r\n                    {secondShot?.resource?.status}\r\n                </Typography>\r\n            </CardContent>\r\n            <div className='bar'/>\r\n        </div>\r\n    );\r\n}\r\n\r\n","import { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport Button from '@mui/material/Button';\r\nimport Stack from '@mui/material/Stack';\r\nimport { styled } from '@mui/material/styles';\r\nimport ReactCardFlip from 'react-card-flip';\r\nimport QrScanner from 'qr-scanner';\r\n\r\nimport './App.css';\r\n// eslint-disable-next-line import/no-webpack-loader-syntax\r\nimport QrScannerWorkerPath from '!!file-loader!../node_modules/qr-scanner/qr-scanner-worker.min';\r\nimport { InfoCard } from './components/info-card';\r\n\r\nQrScanner.WORKER_PATH = QrScannerWorkerPath;\r\n\r\nconst Input = styled('input')({\r\n  display: 'none',\r\n});\r\n\r\nconst App = () => {\r\n  const existingFile = localStorage.getItem('imagePath');\r\n  const [isFlipped, setIsFlipped] = useState(false);\r\n  const [img, setImg] = useState(existingFile);\r\n  const [errorString, setErrorString] = useState();\r\n  const [code, setCode] = useState();\r\n  const reader = useMemo(() => {\r\n    const res = new FileReader();\r\n    res.onload = function() {\r\n      QrScanner.scanImage(res.result)\r\n        .then(resCode => {\r\n          if (resCode.startsWith('shc:')) {\r\n            setImg(res.result);\r\n            setCode(resCode);\r\n            localStorage.setItem('imagePath', res.result);\r\n          } else {\r\n            setErrorString('Invalid QR Code');\r\n          }\r\n        })\r\n        .catch(err => setErrorString('Invalid QR Code'));\r\n    };\r\n    return res;\r\n  }, [setImg, setErrorString]);\r\n\r\n  const onFileChange = useCallback((event) => {\r\n    reader.readAsDataURL(event.target.files[0]);\r\n    setErrorString(undefined);\r\n  }, [reader, setErrorString]);\r\n\r\n  const onDelete = useCallback(() => {\r\n    if (!!img) {\r\n      // eslint-disable-next-line no-restricted-globals\r\n      let conf = confirm('Remove your Vaccine Card?');\r\n      if (conf) {\r\n        setImg(undefined);\r\n        setCode(undefined);\r\n        setErrorString(undefined);\r\n\t\tsetIsFlipped(false);\r\n        localStorage.removeItem('imagePath');\r\n      }\r\n    }\r\n  }, [img, setImg, setCode, setErrorString, setIsFlipped]);\r\n\r\n  const onFlip = useCallback(() => {\r\n    setIsFlipped(!isFlipped);\r\n  }, [isFlipped, setIsFlipped]);\r\n\r\n  useEffect(() => {\r\n\t  if (!!img && !code) {\r\n\t\tQrScanner.scanImage(img)\r\n\t\t\t.then(resCode => {\r\n\t\t\t\tif (resCode.startsWith('shc:')) {\r\n\t\t\t\t\tsetCode(resCode);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tsetErrorString('Invalid QR Code');\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => setErrorString('Invalid QR Code'))\r\n\t  }\r\n  }, [img, code, setCode, setErrorString]);\r\n\r\n  return (\r\n    <div id='app'>\r\n      \t<h1 id='app-title'>Vaccine Passport</h1>\r\n\t\t{!img && \r\n\t\t<label\r\n\t\t\tclassName='center'\r\n\t\t\thtmlFor=\"contained-button-file\">\r\n\t\t\t<Input onChange={onFileChange} accept=\"image/*\" id=\"contained-button-file\" type=\"file\" />\r\n\t\t\t<Button variant=\"contained\" component=\"span\">\r\n\t\t\t  Open\r\n\t\t\t</Button>\r\n\t\t</label>}\r\n\t\t{!!errorString && <p className='bottom' style={{ color: 'red' }}>{errorString}</p>}\r\n\t\t{(!!img && !errorString) && \r\n\t\t\t<div\r\n\t\t\t\tid='flipper'\r\n\t\t\t\tclassName='center'>\r\n\t\t\t\t<ReactCardFlip \r\n\t\t\t\t\tisFlipped={isFlipped} \r\n\t\t\t\t\tflipDirection='horizontal'>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tonClick={onFlip}\r\n\t\t\t\t\t\tclassName='flipper-container'>\r\n\t\t\t\t\t\t<img src={img} alt='covid vaccine qr code'/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<InfoCard code={code} onClick={onFlip}/>\r\n\t\t\t\t</ReactCardFlip>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t}\r\n\t\t{(!!img && !errorString) &&\r\n\t\t\t<Button\r\n\t\t\t\tid='delete'\r\n\t\t\t\tvariant='contained'\r\n\t\t\t\tcolor='error'\r\n\t\t\t\tonClick={onDelete}>\r\n\t\t\t\tDelete\r\n\t\t\t</Button>\r\n\t\t}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport reportWebVitals from './reportWebVitals';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n"],"sourceRoot":""}